{% extends "base.html" %}

{% block content %}
			<ul class="nav nav-tabs">
				{% if backupState == 'all' %}
				<li class="active">
                {% else %}
                <li>
				{% endif %}
				<a href="/allBackupResult/?pageNo=0&hostname=all&backupState=all">全部结果</a></li>
				{% for state in listBackupState %}
					{% if backupState == state.backup_result %}
						<li class="active">
					{% else %}
						<li>
					{% endif %}
				<a href="/allBackupResult/?pageNo=0&backupState={{state.backup_result}}&hostname=all">{{state.backup_result}}</a></li>
				{% endfor %}

			</ul>
			<table class="table table-striped table-hover">
				<thead>
					<tr>
						<th>
							主机名
						</th>
						<th>
							端口
						</th>
						<th>
							库名
						</th>
						<th>
							备份工具
						</th>
						<th>
							备份策略
						</th>
						<th>
							备份结果
						</th>
						<th>
							开始时间
						</th>
						<th>
							结束时间
						</th>
						<th>
							总耗时
						</th>
						<th>
							输入大小
						</th>
						<th>
							备份集大小
						</th>
						<th>
							备注
						</th>
					</tr>
				</thead>
				<tbody>
					{% for record in listBackupResult %}
					<tr>
						<td>
							<a href="/allBackupResult/?pageNo=0&hostname={{record.hostname}}&backupState={{backupState}}">{{record.hostname}}</a>
						</td>
						<td>
							{{record.port}}
						</td>
						<td>
							{{record.dbname}}
						</td>
						<td>
							{{record.backup_tool}}
						</td>
						<td>
							{{record.backup_strategy}}
						</td>
						<td>
							{% if record.backup_result == "OK" or record.backup_result == "成功" %}
								<font color="green"><B>{{record.backup_result}}</B></font>
							{% else %}
								<font color="red"><B>{{record.backup_result}}</B></font>
							{% endif %}
						</td>
						<td>
							{{record.start_time|date:"Y-m-d H:i:s"}}
						</td>
						<td>
							{{record.finish_time|date:"Y-m-d H:i:s"}}
						</td>
						<td>
							{{ record.duration}}
						</td>
						<td>
							{{record.input_size}}
						</td>
						<td>
							{{record.input_size}}
						</td>
						<td>
							{{record.comments}}
						</td>
					</tr>
					{% empty %}
					<tr>
						<td>当前数据库没有备份记录.</td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						
					</tr>
					{% endfor %}
										
				</tbody>
			</table>
			<div style="text-align:center;">
			<ul class="pagination" style="display:inline-block;">
				<li>
					 <a href="/allBackupResult/?pageNo={{pageNo|add:"-1"}}&hostname={{hostname}}&backupState={{backupState}}">前一页</a>
				</li>
				<li class="active">
					 <a href="/allBackupResult/?pageNo={{pageNo|add:"0"}}&hostname={{hostname}}&backupState={{backupState}}">{{pageNo|add:"1"}}</a>
				</li>
				{% if listBackupResult|length >= PAGE_LIMIT %}
				<li>
					 <a href="/allBackupResult/?pageNo={{pageNo|add:"1"}}&hostname={{hostname}}&backupState={{backupState}}">{{pageNo|add:"2"}}</a>
				</li>
				<li>
					 <a href="/allBackupResult/?pageNo={{pageNo|add:"2"}}&hostname={{hostname}}&backupState={{backupState}}">{{pageNo|add:"3"}}</a>
				</li>
				<li>
					 <a href="/allBackupResult/?pageNo={{pageNo|add:"3"}}&hostname={{hostname}}&backupState={{backupState}}">{{pageNo|add:"4"}}</a>
				</li>
				<li>
					 <a href="/allBackupResult/?pageNo={{pageNo|add:"4"}}&hostname={{hostname}}&backupState={{backupState}}">{{pageNo|add:"5"}}</a>
				</li>
				<li>
					 <a href="/allBackupResult/?pageNo={{pageNo|add:"1"}}&hostname={{hostname}}&backupState={{backupState}}">后一页</a>
				</li>
				{% endif %}
			</ul>
			</div>
{% endblock content%}
